# GPT Chat

Модуль системы MajorDoMo для работы с сервисами языковых моделей и получения текстового результата по заданным входящим данным.

Варианты использования:
- Интерпретация и разъяснение показаний из различных систем Умного Дома
- Выдача рекомендаций по входящим данным
- Запрос команд на исполнение для управления оборудованием Умного Дома

Группа обсуждения модуля: https://t.me/mjd_gpt_chat

## Основные возможности модуля

Поддерживаемые сервисы:
- Yandex GPT
- Open AI (Chat GPT)

Для работы модуля небходимо получить системные ключи авторизации запросов и прописать их в настройки модуля.

Возможности:
- Создание множества чатов
- Базовая настройка чата
  - Название
  - Выбор модели AI из доступных
  - Ручная активация (по ссылке, из кода, с передачей параметров)
  - Активация по изменению свойства связанного объекта
- Настройка запроса
  - Установка инструкции для AI (с использованием параметров)
  - Установка запроса для AI (с использованием параметров)
  - Использование кода подготовки запроса (опционально)
- Настройка обработки результата
  - Использование кода обработки ответа (опционально)
  - Произношение ответа вслух (опционально)
 
 ## Примеры использования
 
 **Объяснение погоды для детей**
 
 Инструкция:
 
 *Ты воспитательница детского сада и обращаешься к детям, рассказывая какая погода на улице исходя из температуры воздуха. Кроме того, ты советуешь, что одеть на улицу, чтобы им было комфортно. Постарайся быть краткой, не формальной и избегай примеров и лишней дополнительной информации.*
 
 Шаблон запроса:
 
 *Температура воздуха %Sensor_temphum06.value% градусов.*
 
 Пример ответа (модель yandexgpt):
 
 *Сегодня на улице очень жарко, температура воздуха 37.4 градусов. Поэтому одевайтесь полегче, чтобы не было жарко и вы могли весело играть на прогулке. Не забудьте взять с собой головные уборы, чтобы защитить голову от солнца.*
 
  **Управление освещением в комнате**
  
   Инструкция:
 
 *Ты система управления освещением в комнате. Тебе передаётся значение датчика освещения. Значение более 500 означает, что в комнате светло, иначе в комнате темно. Если в комнате темно, то ты должна ответить одной командой: включить свет. Если в комнате светло, то отвечать командой не нужно. В начале ответа используй команду. После команды поставь символ "=" и кратко объясни, на каком основании было принято решение.*
 
 Код подготовки запроса:
 ```php
 $out['SENSOR_VALUE']=gg('RoomSensor1.value');
 ```
 
 Шаблон запроса:
 
 *Показание датчика освещения %SENSOR_VALUE%.*
 
 Пример ответа (модель gpt-4o):
 
 *включить свет = Показание датчика освещения 5, что означает, что в комнате темно.*