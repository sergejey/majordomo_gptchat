[#if VIEW_MODE="search_gptchats" || VIEW_MODE=""#]
<!-- table zwave_devices search -->
<div>
 [ <a href="#" onClick="$('#api_settings').toggle();return false;"><#LANG_SETUP#></a> ]
</div>
<div style="display:none" id='api_settings'>
&nbsp;
<form action="?" method="post" enctype="multipart/form-data" name="frmEdit" class="form">
<fieldset>
    <div class="form-group">
        <label class="control-label"[#if ERR_YANDEX_OAUTH#] style="color:red;font-weight:bold"[#endif#]>
            Yandex OAuth Token:
            <a href="https://oauth.yandex.ru/authorize?response_type=token&client_id=1a6990aa636648e9b2ef855fa7bec2fb" target="_blank"><i class="glyphicon glyphicon-question-sign"></i></a>
        </label>
        <div class="controls"><input type="text" name="yandex_oauth" value="[#YANDEX_OAUTH#]" class="form-control"></div>
    </div>
<div class="form-group">
 <label class="control-label"[#if ERR_YANDEX_CATALOG_ID#] style="color:red;font-weight:bold"[#endif#]>
 Yandex Catalog ID:
  <a href="https://yandex.cloud/ru/docs/resource-manager/operations/folder/get-id" target="_blank"><i class="glyphicon glyphicon-question-sign"></i></a>
 </label>
 <div class="controls"><input type="text" name="yandex_catalog_id" value="[#YANDEX_CATALOG_ID#]" class="form-control"></div>
</div>

    <div class="form-group">
        <label class="control-label"[#if ERR_OPENAI_API_KEY#] style="color:red;font-weight:bold"[#endif#]>
            OpenAI API Key:
            <a href="https://platform.openai.com/api-keys" target="_blank"><i class="glyphicon glyphicon-question-sign"></i></a>
        </label>
        <div class="controls"><input type="text" name="openai_api_key" value="[#OPENAI_API_KEY#]" class="form-control"></div>
    </div>

<div class="form-actions">
<button type="submit" name="subm" value="Submit" class="btn btn-primary"><#LANG_UPDATE#></button>
<input type="hidden" name="view_mode" value="update_settings">
<input type="hidden" name="mode" value="update">
</div>
</fieldset>
</form>
</div>
&nbsp;
 <!-- action usual -->
 <!-- table gptchats search -->

  [#inc gptchats_search_admin.html#]
 [#endif VIEW_MODE#]
 <!-- / table gptchats search -->
 <!-- table gptchats edit -->
 [#if VIEW_MODE="edit_gptchats"#]

[#if ID!=""#]
[#if TITLE!=""#]<h4>[#TITLE#]</h4>[#endif TITLE#]
<ul class="nav nav-tabs">
 <li[#if TAB=""#] class="active"[#endif#]>
 <a href="?data_source=<#DATA_SOURCE#>&view_mode=<#VIEW_MODE#>&id=<#ID#>&tab="><#LANG_GENERAL#></a>
 </li>
 <li[#if TAB="prompt"#] class="active"[#endif#]>
 <a href="?data_source=<#DATA_SOURCE#>&view_mode=<#VIEW_MODE#>&id=<#ID#>&tab=prompt">Запрос</a>
 </li>
 <li[#if TAB="result"#] class="active"[#endif#]>
 <a href="?data_source=<#DATA_SOURCE#>&view_mode=<#VIEW_MODE#>&id=<#ID#>&tab=result">Результат</a>
 </li>
 <li[#if TAB="history"#] class="active"[#endif#]>
 <a href="?data_source=<#DATA_SOURCE#>&view_mode=<#VIEW_MODE#>&id=<#ID#>&tab=history"><#LANG_HISTORY#></a>
 </li>
</ul>
&nbsp;<br/>
[#endif ID#]

   [#if TAB=""#]
    [#inc gptchats_edit.html#]
   [#endif TAB#]
   [#if TAB="prompt"#]
    [#inc gptchats_edit_prompt.html#]
   [#endif TAB#]
   [#if TAB="result"#]
    [#inc gptchats_edit_result.html#]
   [#endif TAB#]
   [#if TAB="history"#]
    [#inc gptchats_edit_history.html#]
   [#endif TAB#]
 [#endif VIEW_MODE#]
 <!-- / table gptchats edit -->
 <!-- table gptchats view --> 
 [#if VIEW_MODE="view_gptchats"#]
   [#inc gptchats_view.html#]
 [#endif VIEW_MODE#]
 <!-- / table gptchats view -->
